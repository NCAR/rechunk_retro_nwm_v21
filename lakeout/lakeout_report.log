
-------------------------------------------------------
Output file report: /glade/p/datashare/jamesmcc/nwm_retro_v2.1/lakeout.zarr
Total file size: 5.5G
Dataset overviews:
zarr ds.info:
Name        : /
Type        : zarr.hierarchy.Group
Read-only   : False
Store type  : zarr.storage.DirectoryStore
No. members : 8
No. arrays  : 8
No. groups  : 0
Arrays      : crs, feature_id, inflow, latitude, longitude, outflow, time,
            : water_sfc_elev


xarray ds.info:
<xarray.Dataset>
Dimensions:         (feature_id: 5783, time: 367439)
Coordinates:
  * feature_id      (feature_id) int32 491 531 747 ... 947070204 1021092845
    latitude        (feature_id) float32 dask.array<chunksize=(5783,), meta=np.ndarray>
    longitude       (feature_id) float32 dask.array<chunksize=(5783,), meta=np.ndarray>
  * time            (time) datetime64[ns] 1979-02-01T01:00:00 ... 2020-12-31T...
Data variables:
    crs             |S1 ...
    inflow          (time, feature_id) float64 dask.array<chunksize=(8064, 500), meta=np.ndarray>
    outflow         (time, feature_id) float64 dask.array<chunksize=(8064, 500), meta=np.ndarray>
    water_sfc_elev  (time, feature_id) float32 dask.array<chunksize=(8064, 500), meta=np.ndarray>
Attributes:
    Conventions:                  CF-1.6
    TITLE:                        OUTPUT FROM WRF-Hydro v5.2.0-beta2
    code_version:                 v5.2.0-beta2
    featureType:                  timeSeries
    model_configuration:          retrospective
    model_output_type:            reservoir
    proj4:                        +proj=lcc +units=m +a=6370000.0 +b=6370000....
    reservoir_assimilated_value:  Assimilation not performed
    reservoir_type:               1 = level pool everywhere
    station_dimension:            lake_id

-----------------------------------
Variable comparison xarray and zarr

--------

crs

xarray ds[crs]:
<xarray.DataArray 'crs' ()>
array(b'', dtype='|S1')
Attributes:
    _CoordinateAxes:              latitude longitude
    esri_pe_string:               GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SP...
    grid_mapping_name:            latitude longitude
    inverse_flattening:           298.2572326660156
    long_name:                    CRS definition
    longitude_of_prime_meridian:  0.0
    semi_major_axis:              6378137.0
    semi_minor_axis:              6356752.5
    spatial_ref:                  GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SP...
    transform_name:               latitude longitude

zarr dz[crs].info:
Name               : /crs
Type               : zarr.core.Array
Data type          : |S1
Shape              : ()
Chunk shape        : ()
Order              : C
Read-only          : False
Compressor         : None
Store type         : zarr.storage.DirectoryStore
No. bytes          : 1
No. bytes stored   : 1077 (1.1K)
Storage ratio      : 0.0
Chunks initialized : 3/1

Un-Compressed Chunk size in MB: 9.5367431640625e-07
   Compressed Chunk size in MB: inf

--------

feature_id

xarray ds[feature_id]:
<xarray.DataArray 'feature_id' (feature_id: 5783)>
array([       491,        531,        747, ...,  947070203,  947070204,
       1021092845], dtype=int32)
Coordinates:
  * feature_id  (feature_id) int32 491 531 747 ... 947070204 1021092845
    latitude    (feature_id) float32 dask.array<chunksize=(5783,), meta=np.ndarray>
    longitude   (feature_id) float32 dask.array<chunksize=(5783,), meta=np.ndarray>
Attributes:
    cf_role:    timeseries_id
    comment:    ComID from NHDPlusV2 waterbody layer
    long_name:  Lake ComID

zarr dz[feature_id].info:
Name               : /feature_id
Type               : zarr.core.Array
Data type          : int32
Shape              : (5783,)
Chunk shape        : (5783,)
Order              : C
Read-only          : False
Compressor         : Blosc(cname='lz4', clevel=5, shuffle=SHUFFLE, blocksize=0)
Store type         : zarr.storage.DirectoryStore
No. bytes          : 23132 (22.6K)
No. bytes stored   : 13227 (12.9K)
Storage ratio      : 1.7
Chunks initialized : 1/1

Un-Compressed Chunk size in MB: 0.022060394287109375
   Compressed Chunk size in MB: 0.012976702521829045

--------

inflow

xarray ds[inflow]:
<xarray.DataArray 'inflow' (time: 367439, feature_id: 5783)>
dask.array<open_dataset-4611f0dadf26e2839d3521c8af37a85ainflow, shape=(367439, 5783), dtype=float64, chunksize=(8064, 500), chunktype=numpy.ndarray>
Coordinates:
  * feature_id  (feature_id) int32 491 531 747 ... 947070204 1021092845
    latitude    (feature_id) float32 dask.array<chunksize=(5783,), meta=np.ndarray>
    longitude   (feature_id) float32 dask.array<chunksize=(5783,), meta=np.ndarray>
  * time        (time) datetime64[ns] 1979-02-01T01:00:00 ... 2020-12-31T23:0...
Attributes:
    grid_mapping:  crs
    long_name:     Lake Inflow
    units:         m3 s-1

zarr dz[inflow].info:
Name               : /inflow
Type               : zarr.core.Array
Data type          : int32
Shape              : (367439, 5783)
Chunk shape        : (8064, 500)
Order              : C
Read-only          : False
Compressor         : Blosc(cname='lz4', clevel=5, shuffle=SHUFFLE, blocksize=0)
Store type         : zarr.storage.DirectoryStore
No. bytes          : 8499598948 (7.9G)
No. bytes stored   : 1748449461 (1.6G)
Storage ratio      : 4.9
Chunks initialized : 552/552

Un-Compressed Chunk size in MB: 15.380859375
   Compressed Chunk size in MB: 3.138950892857143

--------

latitude

xarray ds[latitude]:
<xarray.DataArray 'latitude' (feature_id: 5783)>
dask.array<open_dataset-4611f0dadf26e2839d3521c8af37a85alatitude, shape=(5783,), dtype=float32, chunksize=(5783,), chunktype=numpy.ndarray>
Coordinates:
  * feature_id  (feature_id) int32 491 531 747 ... 947070204 1021092845
    latitude    (feature_id) float32 dask.array<chunksize=(5783,), meta=np.ndarray>
    longitude   (feature_id) float32 dask.array<chunksize=(5783,), meta=np.ndarray>
Attributes:
    long_name:      Lake latitude
    standard_name:  latitude
    units:          degrees_north

zarr dz[latitude].info:
Name               : /latitude
Type               : zarr.core.Array
Data type          : float32
Shape              : (5783,)
Chunk shape        : (5783,)
Order              : C
Read-only          : False
Compressor         : Blosc(cname='lz4', clevel=5, shuffle=SHUFFLE, blocksize=0)
Store type         : zarr.storage.DirectoryStore
No. bytes          : 23132 (22.6K)
No. bytes stored   : 17498 (17.1K)
Storage ratio      : 1.3
Chunks initialized : 1/1

Un-Compressed Chunk size in MB: 0.022060394287109375
   Compressed Chunk size in MB: 0.01696953406700721

--------

longitude

xarray ds[longitude]:
<xarray.DataArray 'longitude' (feature_id: 5783)>
dask.array<open_dataset-4611f0dadf26e2839d3521c8af37a85alongitude, shape=(5783,), dtype=float32, chunksize=(5783,), chunktype=numpy.ndarray>
Coordinates:
  * feature_id  (feature_id) int32 491 531 747 ... 947070204 1021092845
    latitude    (feature_id) float32 dask.array<chunksize=(5783,), meta=np.ndarray>
    longitude   (feature_id) float32 dask.array<chunksize=(5783,), meta=np.ndarray>
Attributes:
    long_name:      Lake longitude
    standard_name:  longitude
    units:          degrees_east

zarr dz[longitude].info:
Name               : /longitude
Type               : zarr.core.Array
Data type          : float32
Shape              : (5783,)
Chunk shape        : (5783,)
Order              : C
Read-only          : False
Compressor         : Blosc(cname='lz4', clevel=5, shuffle=SHUFFLE, blocksize=0)
Store type         : zarr.storage.DirectoryStore
No. bytes          : 23132 (22.6K)
No. bytes stored   : 17316 (16.9K)
Storage ratio      : 1.3
Chunks initialized : 1/1

Un-Compressed Chunk size in MB: 0.022060394287109375
   Compressed Chunk size in MB: 0.01696953406700721

--------

outflow

xarray ds[outflow]:
<xarray.DataArray 'outflow' (time: 367439, feature_id: 5783)>
dask.array<open_dataset-4611f0dadf26e2839d3521c8af37a85aoutflow, shape=(367439, 5783), dtype=float64, chunksize=(8064, 500), chunktype=numpy.ndarray>
Coordinates:
  * feature_id  (feature_id) int32 491 531 747 ... 947070204 1021092845
    latitude    (feature_id) float32 dask.array<chunksize=(5783,), meta=np.ndarray>
    longitude   (feature_id) float32 dask.array<chunksize=(5783,), meta=np.ndarray>
  * time        (time) datetime64[ns] 1979-02-01T01:00:00 ... 2020-12-31T23:0...
Attributes:
    grid_mapping:  crs
    long_name:     Lake Outflow
    units:         m3 s-1

zarr dz[outflow].info:
Name               : /outflow
Type               : zarr.core.Array
Data type          : int32
Shape              : (367439, 5783)
Chunk shape        : (8064, 500)
Order              : C
Read-only          : False
Compressor         : Blosc(cname='lz4', clevel=5, shuffle=SHUFFLE, blocksize=0)
Store type         : zarr.storage.DirectoryStore
No. bytes          : 8499598948 (7.9G)
No. bytes stored   : 1246211282 (1.2G)
Storage ratio      : 6.8
Chunks initialized : 552/552

Un-Compressed Chunk size in MB: 15.380859375
   Compressed Chunk size in MB: 2.2618910845588234

--------

time

xarray ds[time]:
<xarray.DataArray 'time' (time: 367439)>
array(['1979-02-01T01:00:00.000000000', '1979-02-01T02:00:00.000000000',
       '1979-02-01T03:00:00.000000000', ..., '2020-12-31T21:00:00.000000000',
       '2020-12-31T22:00:00.000000000', '2020-12-31T23:00:00.000000000'],
      dtype='datetime64[ns]')
Coordinates:
  * time     (time) datetime64[ns] 1979-02-01T01:00:00 ... 2020-12-31T23:00:00
Attributes:
    long_name:      valid output time
    standard_name:  time
    valid_max:      4862880
    valid_min:      4777980

zarr dz[time].info:
Name               : /time
Type               : zarr.core.Array
Data type          : int64
Shape              : (367439,)
Chunk shape        : (8064,)
Order              : C
Read-only          : False
Compressor         : Blosc(cname='lz4', clevel=5, shuffle=SHUFFLE, blocksize=0)
Store type         : zarr.storage.DirectoryStore
No. bytes          : 2939512 (2.8M)
No. bytes stored   : 35841 (35.0K)
Storage ratio      : 82.0
Chunks initialized : 46/46

Un-Compressed Chunk size in MB: 0.0615234375
   Compressed Chunk size in MB: 0.0007502858231707317

--------

water_sfc_elev

xarray ds[water_sfc_elev]:
<xarray.DataArray 'water_sfc_elev' (time: 367439, feature_id: 5783)>
dask.array<open_dataset-4611f0dadf26e2839d3521c8af37a85awater_sfc_elev, shape=(367439, 5783), dtype=float32, chunksize=(8064, 500), chunktype=numpy.ndarray>
Coordinates:
  * feature_id  (feature_id) int32 491 531 747 ... 947070204 1021092845
    latitude    (feature_id) float32 dask.array<chunksize=(5783,), meta=np.ndarray>
    longitude   (feature_id) float32 dask.array<chunksize=(5783,), meta=np.ndarray>
  * time        (time) datetime64[ns] 1979-02-01T01:00:00 ... 2020-12-31T23:0...
Attributes:
    comment:    If reservoir_type = 4, water_sfc_elev is invalid because this...
    long_name:  Water Surface Elevation
    units:      m

zarr dz[water_sfc_elev].info:
Name               : /water_sfc_elev
Type               : zarr.core.Array
Data type          : float32
Shape              : (367439, 5783)
Chunk shape        : (8064, 500)
Order              : C
Read-only          : False
Compressor         : Blosc(cname='lz4', clevel=5, shuffle=SHUFFLE, blocksize=0)
Store type         : zarr.storage.DirectoryStore
No. bytes          : 8499598948 (7.9G)
No. bytes stored   : 2828358144 (2.6G)
Storage ratio      : 3.0
Chunks initialized : 552/552

Un-Compressed Chunk size in MB: 15.380859375
   Compressed Chunk size in MB: 5.126953125

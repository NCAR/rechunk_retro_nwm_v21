
-------------------------------------------------------
Output file report: /glade/scratch/jamesmcc/retro_collect/precip/precip.zarr
Total file size: 65G
Dataset overviews:
zarr ds.info:
Name        : /
Type        : zarr.hierarchy.Group
Read-only   : False
Store type  : zarr.storage.DirectoryStore
No. members : 5
No. arrays  : 5
No. groups  : 0
Arrays      : RAINRATE, crs, time, x, y


xarray ds.info:
<xarray.Dataset>
Dimensions:   (time: 19489, y: 3840, x: 4608)
Coordinates:
    crs       |S1 ...
  * time      (time) datetime64[ns] 1979-02-01 ... 1981-04-23
  * x         (x) float64 -2.303e+06 -2.302e+06 ... 2.303e+06 2.304e+06
  * y         (y) float64 -1.92e+06 -1.919e+06 ... 1.918e+06 1.919e+06
Data variables:
    RAINRATE  (time, y, x) float32 dask.array<chunksize=(672, 350, 350), meta=np.ndarray>
Attributes:
    NWM_version_number:         v2.1
    model_configuration:        AORC
    model_initialization_time:  1981-04-01_00:00:00
    model_output_type:          forcing
    model_output_valid_time:    1981-04-23_00:00:00
    model_total_valid_times:    720.0

-----------------------------------
Variable comparison xarray and zarr

--------

RAINRATE

xarray ds[RAINRATE]:
<xarray.DataArray 'RAINRATE' (time: 19489, y: 3840, x: 4608)>
dask.array<open_dataset-849f642bddd31b1658b7746d39ab7a6bRAINRATE, shape=(19489, 3840, 4608), dtype=float32, chunksize=(672, 350, 350), chunktype=numpy.ndarray>
Coordinates:
    crs      |S1 ...
  * time     (time) datetime64[ns] 1979-02-01 1979-02-01T01:00:00 ... 1981-04-23
  * x        (x) float64 -2.303e+06 -2.302e+06 ... 2.303e+06 2.304e+06
  * y        (y) float64 -1.92e+06 -1.919e+06 -1.918e+06 ... 1.918e+06 1.919e+06
Attributes:
    cell_methods:    time: mean
    esri_pe_string:  PROJCS["Lambert_Conformal_Conic",GEOGCS["GCS_Sphere",DAT...
    grid_mapping:    crs
    long_name:       Surface Precipitation Rate
    proj4:           +proj=lcc +units=m +a=6370000.0 +b=6370000.0 +lat_1=30.0...
    remap:           remapped via ESMF regrid_with_weights: Bilinear
    standard_name:   precipitation_flux
    units:           mm s^-1

zarr dz[RAINRATE].info:
Name               : /RAINRATE
Type               : zarr.core.Array
Data type          : float32
Shape              : (19489, 3840, 4608)
Chunk shape        : (672, 350, 350)
Order              : C
Read-only          : False
Compressor         : Blosc(cname='lz4', clevel=5, shuffle=SHUFFLE, blocksize=0)
Store type         : zarr.storage.DirectoryStore
No. bytes          : 1379409592320 (1.3T)
No. bytes stored   : 69323006156 (64.6G)
Storage ratio      : 19.9
Chunks initialized : 4620/4620

Chunk size in MB: 314.02587890625

--------

crs

xarray ds[crs]:
<xarray.DataArray 'crs' ()>
array(b'', dtype='|S1')
Coordinates:
    crs      |S1 ...
Attributes: (12/17)
    GeoTransform:                   -2303999.17655 1000.0 0 1919999.66329 0 -...
    _CoordinateAxes:                y x
    _CoordinateTransformType:       Projection
    earth_radius:                   6370000.0
    esri_pe_string:                 PROJCS["Lambert_Conformal_Conic",GEOGCS["...
    false_easting:                  0.0
    ...                             ...
    longitude_of_central_meridian:  -97.0
    longitude_of_prime_meridian:    0.0
    semi_major_axis:                6370000.0
    spatial_ref:                    PROJCS["Lambert_Conformal_Conic",GEOGCS["...
    standard_parallel:              [30.0, 60.0]
    transform_name:                 lambert_conformal_conic

zarr dz[crs].info:
Name               : /crs
Type               : zarr.core.Array
Data type          : |S1
Shape              : ()
Chunk shape        : ()
Order              : C
Read-only          : False
Compressor         : None
Store type         : zarr.storage.DirectoryStore
No. bytes          : 1
No. bytes stored   : 1970 (1.9K)
Storage ratio      : 0.0
Chunks initialized : 3/1

Chunk size in MB: 9.5367431640625e-07

--------

time

xarray ds[time]:
<xarray.DataArray 'time' (time: 19489)>
array(['1979-02-01T00:00:00.000000000', '1979-02-01T01:00:00.000000000',
       '1979-02-01T02:00:00.000000000', ..., '1981-04-22T22:00:00.000000000',
       '1981-04-22T23:00:00.000000000', '1981-04-23T00:00:00.000000000'],
      dtype='datetime64[ns]')
Coordinates:
    crs      |S1 ...
  * time     (time) datetime64[ns] 1979-02-01 1979-02-01T01:00:00 ... 1981-04-23
Attributes:
    long_name:      valid output time
    standard_name:  time

zarr dz[time].info:
Name               : /time
Type               : zarr.core.Array
Data type          : int64
Shape              : (19489,)
Chunk shape        : (672,)
Order              : C
Read-only          : False
Compressor         : Blosc(cname='lz4', clevel=5, shuffle=SHUFFLE, blocksize=0)
Store type         : zarr.storage.DirectoryStore
No. bytes          : 155912 (152.3K)
No. bytes stored   : 12898 (12.6K)
Storage ratio      : 12.1
Chunks initialized : 30/30

Chunk size in MB: 0.005126953125

--------

x

xarray ds[x]:
<xarray.DataArray 'x' (x: 4608)>
array([-2303499.25, -2302499.25, -2301499.25, ...,  2301500.75,  2302500.75,
        2303500.75])
Coordinates:
    crs      |S1 ...
  * x        (x) float64 -2.303e+06 -2.302e+06 ... 2.303e+06 2.304e+06
Attributes:
    _CoordinateAxisType:  GeoX
    long_name:            x coordinate of projection
    resolution:           1000.0
    standard_name:        projection_x_coordinate
    units:                m

zarr dz[x].info:
Name               : /x
Type               : zarr.core.Array
Data type          : float64
Shape              : (4608,)
Chunk shape        : (4608,)
Order              : C
Read-only          : False
Compressor         : Blosc(cname='lz4', clevel=5, shuffle=SHUFFLE, blocksize=0)
Store type         : zarr.storage.DirectoryStore
No. bytes          : 36864 (36.0K)
No. bytes stored   : 6753 (6.6K)
Storage ratio      : 5.5
Chunks initialized : 1/1

Chunk size in MB: 0.03515625

--------

y

xarray ds[y]:
<xarray.DataArray 'y' (y: 3840)>
array([-1919500.375, -1918500.375, -1917500.375, ...,  1917499.625,
        1918499.625,  1919499.625])
Coordinates:
    crs      |S1 ...
  * y        (y) float64 -1.92e+06 -1.919e+06 -1.918e+06 ... 1.918e+06 1.919e+06
Attributes:
    _CoordinateAxisType:  GeoY
    long_name:            y coordinate of projection
    resolution:           1000.0
    standard_name:        projection_y_coordinate
    units:                m

zarr dz[y].info:
Name               : /y
Type               : zarr.core.Array
Data type          : float64
Shape              : (3840,)
Chunk shape        : (3840,)
Order              : C
Read-only          : False
Compressor         : Blosc(cname='lz4', clevel=5, shuffle=SHUFFLE, blocksize=0)
Store type         : zarr.storage.DirectoryStore
No. bytes          : 30720 (30.0K)
No. bytes stored   : 5679 (5.5K)
Storage ratio      : 5.4
Chunks initialized : 1/1

Chunk size in MB: 0.029296875
